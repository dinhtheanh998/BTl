@using BTL_LTQL.Models;
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container">
    <section class="pt-5 pb-5">
        <div class="container">
            <div class="row w-100">
                <div class="col-lg-12 col-md-12 col-12">
                    <h3 class="display-5 mb-2 text-center">Shopping Cart</h3>
                    @*<p class="mb-5 text-center">
                            <i class="text-info font-weight-bold">3</i> items in your cart
                        </p>*@
                    <table id="shoppingCart" class="table table-condensed table-responsive">
                        <thead>
                            <tr>
                                <th style="width:60%">Product</th>
                                <th style="width:12%">Price</th>
                                <th style="width:10%">Quantity</th>
                                <th style="width:16%"></th>
                            </tr>
                        </thead>

                        @foreach (var cart in (List<Cart>)Session["Cart"])
                        {
                            <tbody>
                                <tr>
                                    <td data-th="Product">
                                        <div class="row">
                                            <div class="col-md-3 text-left">
                                                <img src="@cart.Product.ProductImageName" alt="" class="img-fluid d-none d-md-block rounded mb-2 shadow " style="width:200px">
                                            </div>
                                            <div class="col-md-9 text-left mt-sm-2">
                                                <h4>@Html.ActionLink(cart.Product.ProductName, "Details", "Products", new { id = cart.Product.ProductID }, new { @class = "delete-shopping" })</h4>

                                            </div>
                                        </div>
                                    </td>
                                    <td data-th="Price">@(String.Format("{0:N0}", cart.Product.ProductPrice)) VNĐ</td>
                                    <td data-th="Quantity">
                                        <input type="number" class="form-control form-control-lg text-center productqua" value ="@cart.Quantity">
                                    </td>
                                    @*<td class="actions" data-th="">
                                            <div class="text-right">
                                                <button class="btn btn-white border-secondary bg-white btn-md mb-2">
                                                    <i class="fas fa-sync"></i>
                                                </button>
                                                <button class="btn btn-white border-secondary bg-white btn-md mb-2" onclick="return confirm ('Are you sure you want to delete this?') ;" , class="delete-shopping">
                                                    <i class="fas fa-trash"></i>
                                                </button>

                                            </div>
                                        </td>*@
                                    <td>
                                        @Html.ActionLink("Delete", "Delete", "ShoppingCart", new { id = cart.Product.ProductID },
                                        new { onclick = "return confirm ('Are you sure you want to delete this?');", @class = "delete-shopping" })
                                    </td>
                                </tr>
                            </tbody>

                            @*<tr>
                                    <td>@Html.ActionLink(cart.Product.ProductName, "Details", "Products", new { id = cart.Product.ProductID }, new { @class = "delete-shopping" })</td>
                                    <td>$@(String.Format("{0:N0}", cart.Product.ProductPrice))</td>
                                    <td>
                                        <input type="text" name="quantity" id="quantity" value="@cart.Quantity" />
                                        &nbsp;<span id="errmsg"></span>
                                    </td>
                                    <td>$@(String.Format("{0:N0}", cart.Product.ProductPrice * cart.Quantity))</td>
                                    <td>
                                        @Html.ActionLink("Delete", "Delete", "ShoppingCart", new { id = cart.Product.ProductID },
                                        new { onclick = "return confirm ('Are you sure you want to delete this?');", @class = "delete-shopping" })
                                    </td>
                                </tr>*@
                        }
                        <tr>
                            <td colspan="3" class="total-price-text">Total:</td>
                            <td class="total-price-digit">
                                @{
                                    List<Cart> temp = (List<Cart>)Session["Cart"];
                                    var total = String.Format("{0:N0}", temp.Sum(x => x.Quantity * x.Product.ProductPrice));
                                }

                                @total VNĐ
                            </td>
                        <tr>
                            <td colspan="3" class="total-price-text">
                                <a href="/Products/Index">Tiếp Tục Mua Hàng</a>
                            </td>
                            <td colspan="3" class="total-price-text">
                                <a href="#">Thanh Toán</a>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </section>
</div>



